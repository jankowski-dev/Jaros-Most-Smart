# –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ

## –û—à–∏–±–∫–∞ "Unexpected token 'O', "OggS"... is not valid JSON"

**–≠—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞, –∞ –ø—Ä–∏–∑–Ω–∞–∫ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å** –æ—Ç —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
2. **–ü—Ä–æ–∫—Å–∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Yandex SpeechKit API** —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º
3. **Yandex –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª** –≤ —Ñ–æ—Ä–º–∞—Ç–µ Ogg (–±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
4. **–ü—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª –æ–±—Ä–∞—Ç–Ω–æ** —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
5. **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–∂–∏–¥–∞–µ—Ç JSON**, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –∞—É–¥–∏–æ-–¥–∞–Ω–Ω—ã–µ

### –ü–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–æ:

- **"OggS"** - —ç—Ç–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ Ogg –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ (–∫–∞–∫ "PNG" –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- –ü—Ä–æ–∫—Å–∏ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∏–ª –∞—É–¥–∏–æ –æ—Ç Yandex
- Yandex API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í–µ—Å—å –ø—É—Ç—å –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí Railway –ø—Ä–æ–∫—Å–∏ ‚Üí Yandex ‚Üí Railway –ø—Ä–æ–∫—Å–∏ ‚Üí –±—Ä–∞—É–∑–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç!

## –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å Railway
- –î–≤–∏–∂–æ–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `yandex`
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### ‚úÖ –¢–µ—Å—Ç —Å–∏–Ω—Ç–µ–∑–∞ - —É—Å–ø–µ—à–Ω–æ
- SpeechService —Ä–∞–±–æ—Ç–∞–µ—Ç
- Yandex SpeechKit –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –ê—É–¥–∏–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è (–≤—ã —Å–ª—ã—à–∏—Ç–µ —Ä–µ—á—å —á–µ—Ä–µ–∑ Yandex!)

### ‚ö†Ô∏è –¢–µ—Å—Ç –ø—Ä–æ–∫—Å–∏: "–û—à–∏–±–∫–∞" (–Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —É—Å–ø–µ—Ö!)
- –ü—Ä–æ–∫—Å–∏ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å ‚úÖ
- –ü—Ä–æ–∫—Å–∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Yandex ‚úÖ  
- Yandex –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—É–¥–∏–æ ‚úÖ
- –ü—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –∞—É–¥–∏–æ –æ–±—Ä–∞—Ç–Ω–æ ‚úÖ
- –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∞—É–¥–∏–æ –∫–∞–∫ JSON (–æ–∂–∏–¥–∞–µ–º–æ!)

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –°–ø–æ—Å–æ–± 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Railway:
```
https://–≤–∞—à-–¥–æ–º–µ–Ω.railway.app/
```

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∑–≤—É—á–∫—É –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–Ω–∞—á–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

### –°–ø–æ—Å–æ–± 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –ø–æ–º–æ—â—å—é curl (–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
curl -X POST https://–≤–∞—à-–¥–æ–º–µ–Ω.railway.app/api/tts \
  -H "Content-Type: application/json" \
  -d '{"text":"–¢–µ—Å—Ç –ø—Ä–æ–∫—Å–∏", "voice":"alena"}' \
  --output test.ogg
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test.ogg` - –≤—ã —É—Å–ª—ã—à–∏—Ç–µ —Ä–µ—á—å!

### –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
–í –ª–æ–≥–∞—Ö Railway –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- –ó–∞–ø—Ä–æ—Å—ã –∫ `/api/tts`
- –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Yandex API
- –†–∞–∑–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤

## –ü–æ—á–µ–º—É —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É?

–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∫—Å–∏:
```javascript
const response = await fetch('/api/tts', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({text: "–¢–µ—Å—Ç –ø—Ä–æ–∫—Å–∏"})
});

// –û–∂–∏–¥–∞–µ—Ç JSON, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ!
const data = await response.json(); // –û—à–∏–±–∫–∞ –∑–¥–µ—Å—å!
```

**–†–µ—à–µ–Ω–∏–µ**: –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã –æ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –∞—É–¥–∏–æ-–æ—Ç–≤–µ—Ç—ã.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å** —Å Yandex SpeechKit
2. **–ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ "–æ—à–∏–±–∫—É" –≤ —Ç–µ—Å—Ç–µ –ø—Ä–æ–∫—Å–∏** - —ç—Ç–æ –ª–æ–∂–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –µ—Å–ª–∏ –æ–∑–≤—É—á–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Yandex, –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
console.log('–î–≤–∏–∂–æ–∫:', window.appConfig.speech.engine);

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SpeechService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Yandex
if (window.speechService) {
  console.log('SpeechService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:', window.speechService.config.engine);
}

// –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∏–Ω—Ç–µ–∑
if (window.speechService) {
  window.speechService.speak('–¢–µ—Å—Ç Yandex SpeechKit');
}
```

–ï—Å–ª–∏ –≤—ã —Å–ª—ã—à–∏—Ç–µ —Ä–µ—á—å —á–µ—Ä–µ–∑ Yandex (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ —Å–∏–Ω—Ç–µ–∑–∞), –∑–Ω–∞—á–∏—Ç –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

## –ò—Ç–æ–≥:

**–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! üéä Yandex SpeechKit —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.**

- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Yandex API –∫–ª—é—á –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- ‚úÖ –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –ê—É–¥–∏–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
- ‚ö†Ô∏è –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

**–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ - –≤–∞—à –ø—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Yandex SpeechKit –≤–º–µ—Å—Ç–æ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ —Å–∏–Ω—Ç–µ–∑–∞!**